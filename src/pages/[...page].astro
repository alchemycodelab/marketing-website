---
import { getStaticPaths, getPage } from './builder.js';
import Page from '../layouts/page.astro';
import BuilderServer from '../components/BuilderServer.jsx'
import BuilderClient from '../components/BuilderClient.tsx'

export { getStaticPaths };

const { pages } = Astro.props;
const { url } = Astro.request
const page = await getPage(url.pathname);
const isEditing = import.meta.env.MODE === 'editing';
if(isEditing) console.log('edit mode');
---

<Page pages={pages} page={page}>
	{ !isEditing ? <BuilderServer page={page} /> : <BuilderClient page={page} client:only /> }
</Page>
