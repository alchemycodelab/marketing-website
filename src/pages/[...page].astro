---
import { getPage } from '../builder/services.js';
import getStaticPaths from '../builder/getStaticPaths.js';
import { PAGE_MODEL } from '../builder/constants.js';
import CMS from '../builder/builder.astro';
import Page from '../layouts/page.astro';

export { getStaticPaths };

const { pages } = Astro.props;
const url = new URL(Astro.request.url);
const page = await getPage(url.pathname);
---

<Page pages={pages} page={page}>
  <CMS model={PAGE_MODEL} content={page} />
</Page>
